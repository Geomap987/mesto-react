(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{10:function(e,t,n){e.exports=n(16)},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(5),i=n.n(r),c=(n(15),n(9)),s=n(1),u=n(6),l=n.n(u);var p=function(){return o.a.createElement("header",{className:"header"},o.a.createElement("img",{className:"header__logo",src:l.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u041c\u0435\u0441\u0442\u043e. \u0420\u043e\u0441\u0441\u0438\u044f"}))};var m=function(e){var t=e.title,n=e.link,a=e.likesNumber,r=e.onCardClick,i=e.item,c=e.isOwn,s=e.isLiked,u=e.onCardLike,l=e.onCardDelete;return o.a.createElement("article",{className:"photo-grid__card"},o.a.createElement("img",{className:"photo-grid__photo",src:n,alt:t,onClick:function(){r(i)}}),o.a.createElement("button",{onClick:function(){l(i)},className:c?"photo-grid__delete-icon":"photo-grid__delete-icon_none"}),o.a.createElement("div",{className:"photo-grid__text"},o.a.createElement("h3",{className:"photo-grid__title"},t),o.a.createElement("div",{className:"photo-grid__like-wrapper"},o.a.createElement("button",{onClick:function(){u(i)},type:"button",className:s?"photo-grid__like-icon_active":"photo-grid__like-icon"}),o.a.createElement("h4",{className:"photo-grid__like-counter"},a))))},d=o.a.createContext();var _=function(e){var t=o.a.useContext(d);return o.a.createElement("main",{className:"content"},o.a.createElement("section",{className:"profile"},o.a.createElement("div",{className:"profile__wrapper"},o.a.createElement("div",{className:"profile__photo-wrapper"},o.a.createElement("img",{className:"profile__photo",src:t.avatar,alt:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f \u043f\u0440\u043e\u0444\u0438\u043b\u044f"}),o.a.createElement("div",{onClick:e.onEditAvatar,className:"profile__edit-pen"})),o.a.createElement("div",{className:"profile__text-container"},o.a.createElement("div",{className:"profile__button-wrapper"},o.a.createElement("h1",{className:"profile__title"},t.name),o.a.createElement("button",{onClick:e.onEditProfile,type:"button",className:"profile__edit-button"})),o.a.createElement("p",{className:"profile__subtitle"},t.about))),o.a.createElement("button",{onClick:e.openAddPlace,type:"button",className:"profile__add-button"})),o.a.createElement("section",{className:"photo-grid"},o.a.createElement("div",{className:"photo-grid__container"},e.cards.map((function(n){return o.a.createElement(m,{onCardDelete:e.onCardDelete,onCardLike:e.onCardLike,isLiked:n.likes.some((function(e){return e._id===t._id})),isOwn:n.owner._id===t._id,key:n._id,title:n.name,link:n.link,likesNumber:n.likes.length,onCardClick:e.mainCardClick,item:n})})))))};var h=function(){return o.a.createElement("footer",{className:"footer"},o.a.createElement("p",{className:"footer__copyright"},"\xa9 2020. \u041c\u0430\u0440\u0438\u044f \u0412\u0430\u0441\u0438\u043b\u044c\u0435\u0432\u0430"))},f=function(e){var t=e.title,n=e.name,a=e.isOpen,r=e.onClose,i=e.children,c=e.onSubmit,s=e.buttonText;return o.a.createElement("section",{className:a?"popup popup-".concat(n," popup_opened"):"popup popup-".concat(n)},o.a.createElement("form",{id:"".concat(n,"form"),name:"".concat(n,"form"),className:"popup__container popup__container_".concat(n),onSubmit:c,noValidate:!0},o.a.createElement("button",{type:"button",onClick:r,id:"".concat(n,"button"),className:"popup__close-button"}),o.a.createElement("h3",{className:"popup__title"},t),i,o.a.createElement("button",{type:"submit",id:"submit-button",className:"popup__submit-button popup-".concat(n,"__submit-button")},s)))};var v=function(e){var t=e.onClose,n=e.isOpen,a=e.image,r=e.title;return o.a.createElement("section",{id:"bigphotopopup",className:n?"popup popup-bigphotopopup popup_opened":"popup popup-bigphotopopup"},o.a.createElement("div",{className:"popup__bigphoto-container "},o.a.createElement("button",{onClick:t,type:"button",id:"bigphotobutton",className:"popup__close-button"}),o.a.createElement("img",{src:a,className:"popup__bigphoto-image",alt:r}),o.a.createElement("p",{className:"popup__bigphoto-subtitle"},r)))};var b=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateUser,r=o.a.useState(""),i=Object(s.a)(r,2),c=i[0],u=i[1],l=o.a.useState(""),p=Object(s.a)(l,2),m=p[0],_=p[1],h=o.a.useContext(d);return o.a.useEffect((function(){u(h.name),_(h.about)}),[h]),o.a.createElement(f,{onSubmit:function(e){e.preventDefault(),a({name:c,about:m})},onClose:n,isOpen:t,name:"profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},o.a.createElement("input",{onChange:function(e){u(e.target.value)},type:"text",id:"profilename",name:"name",placeholder:"\u0418\u043c\u044f",value:c,className:"popup__input popup__input_title",pattern:"[a-zA-Z\u0410-\u042f\u0401\u0430-\u044f\u0451\\s\\-]+",minLength:"2",maxLength:"40",required:!0}),o.a.createElement("span",{className:"popup__input-error",id:"profilename-error"}),o.a.createElement("input",{onChange:function(e){_(e.target.value)},type:"text",id:"profilejob",name:"about",placeholder:"\u0417\u0430\u043d\u044f\u0442\u0438\u0435",value:m,className:"popup__input popup__input_subtitle",minLength:"2",maxLength:"200",required:!0}),o.a.createElement("span",{className:"popup__input-error",id:"profilejob-error"}))};var E=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateAvatar,r=o.a.useRef();return o.a.createElement(f,{onSubmit:function(e){e.preventDefault(),a({avatar:r.current.value})},onClose:n,isOpen:t,name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},o.a.createElement("input",{ref:r,type:"url",id:"avatarlink",name:"avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",className:"popup__input popup__input_avatar",required:!0}),o.a.createElement("span",{className:"popup__input-error",id:"avatarlink-error"}))};var k=function(e){var t=e.isOpen,n=e.onClose,a=e.onAddPlace,r=o.a.useRef(),i=o.a.useRef();return o.a.createElement(f,{onSubmit:function(e){e.preventDefault(),a({name:i.current.value,link:r.current.value})},onClose:n,isOpen:t,name:"addphoto",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",buttonText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"},o.a.createElement("input",{ref:i,type:"text",id:"photoplace",name:"name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",className:"popup__input popup__input_title",pattern:"[a-zA-Z\u0410-\u042f\u0401\u0430-\u044f\u0451\\s\\d\\-]+",minLength:"2",maxLength:"40",required:!0}),o.a.createElement("span",{className:"popup__input-error",id:"photoplace-error"}),o.a.createElement("input",{ref:r,type:"url",id:"photolink",name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"popup__input popup__input_subtitle",required:!0}),o.a.createElement("span",{className:"popup__input-error",id:"photolink-error"}))},g=n(7),C=n(8),N=new(function(){function e(t){var n=t.address,a=t.token,o=t.groupId;Object(g.a)(this,e),this._address=n,this._token=a,this._groupId=o}return Object(C.a)(e,[{key:"getInitialInfo",value:function(){return Promise.all([this.getUserInfo(),this.getCardList()])}},{key:"getUserInfo",value:function(){return fetch("".concat(this._address,"/").concat(this._groupId,"/users/me"),{headers:{authorization:this._token,"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"editUserInfo",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this._address,"/").concat(this._groupId,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:n})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"editUserAvatar",value:function(e){var t=e.avatar;return fetch("".concat(this._address,"/").concat(this._groupId,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"getCardList",value:function(){return fetch("".concat(this._address,"/").concat(this._groupId,"/cards"),{headers:{authorization:this._token,"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"createCard",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this._address,"/").concat(this._groupId,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:n})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._address,"/").concat(this._groupId,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"likeCard",value:function(e,t){var n;return n=t?"DELETE":"PUT",fetch("".concat(this._address,"/").concat(this._groupId,"/cards/likes/").concat(e),{method:n,headers:{authorization:this._token,"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}}]),e}())({address:"https://mesto.nomoreparties.co/v1",token:"3a4b08db-7c45-4ccb-8ab5-c20c75737af9",groupId:"cohort-14"}),j=o.a.createContext();var y=function(){var e=o.a.useState(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],i=o.a.useState(!1),u=Object(s.a)(i,2),l=u[0],m=u[1],g=o.a.useState(!1),C=Object(s.a)(g,2),y=C[0],O=C[1],P=o.a.useState({title:"",link:""}),x=Object(s.a)(P,2),I=x[0],S=x[1],T=o.a.useState({}),L=Object(s.a)(T,2),w=L[0],A=L[1],U=o.a.useState([]),z=Object(s.a)(U,2),D=z[0],q=z[1];function J(){r(!1),m(!1),O(!1),S({title:"",link:""})}return Object(a.useEffect)((function(){N.getUserInfo().then((function(e){A(e)})).catch((function(e){return console.log(e)}))}),[]),Object(a.useEffect)((function(){N.getCardList().then((function(e){q(e)})).catch((function(e){return console.log(e)}))}),[]),o.a.createElement(d.Provider,{value:w},o.a.createElement(j.Provider,{value:D},o.a.createElement("div",{className:"page"},o.a.createElement(p,null),o.a.createElement(_,{onEditAvatar:function(){r(!n)},onEditProfile:function(){m(!l)},openAddPlace:function(){O(!y)},mainCardClick:function(e){S(e)},onCardDelete:function(e){N.deleteCard(e._id).then((function(t){var n=D.filter((function(t){return t._id!==e._id})).catch((function(e){return console.log(e)}));q(n)}))},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===w._id}));N.likeCard(e._id,t).then((function(t){var n=D.map((function(n){return n._id===e._id?t:n})).catch((function(e){return console.log(e)}));q(n)}))},cards:D}),o.a.createElement(h,null),o.a.createElement(b,{isOpen:l,onClose:J,onUpdateUser:function(e){N.editUserInfo(e).then((function(e){A(e),J()})).catch((function(e){return console.log(e)}))}}),o.a.createElement(E,{isOpen:n,onClose:J,onUpdateAvatar:function(e){N.editUserAvatar(e).then((function(e){A(e),J()})).catch((function(e){return console.log(e)}))}}),o.a.createElement(k,{onClose:J,isOpen:y,onAddPlace:function(e){N.createCard(e).then((function(e){q([].concat(Object(c.a)(D),[e])),J()})).catch((function(e){return console.log(e)}))}}),o.a.createElement(f,{name:"confirm",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonText:"\u0414\u0430"}),o.a.createElement(v,{onClose:J,isOpen:I.link,image:I.link,title:I.name}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,n){e.exports=n.p+"static/media/logo.855a8c98.svg"}},[[10,1,2]]]);
//# sourceMappingURL=main.9aadb277.chunk.js.map